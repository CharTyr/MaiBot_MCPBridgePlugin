# MCPæ¡¥æ¥æ’ä»¶ v1.4.0 - é…ç½®æ–‡ä»¶ç¤ºä¾‹
# å°† MCP (Model Context Protocol) æœåŠ¡å™¨çš„å·¥å…·æ¡¥æ¥åˆ° MaiBot
# 
# ä½¿ç”¨æ–¹æ³•ï¼šå¤åˆ¶æ­¤æ–‡ä»¶ä¸º config.tomlï¼Œç„¶åæ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®
#
# ============================================================
# ğŸ“š å¦‚ä½•è·å– MCP æœåŠ¡å™¨ï¼Ÿ
# ============================================================
#
# ã€è¿œç¨‹ MCP æœåŠ¡ï¼ˆHTTP/SSE æ–¹å¼ï¼‰ã€‘
#   - é­”æ­ ModelScope: https://mcp.modelscope.cn/
#     é˜¿é‡Œäº‘æä¾›çš„ MCP æœåŠ¡å¹³å°ï¼Œæœ‰å¤šç§å…è´¹å·¥å…·
#   - Smithery: https://smithery.ai/
#     MCP æœåŠ¡å™¨æ³¨å†Œä¸­å¿ƒï¼Œå¯æœç´¢å„ç±» MCP æœåŠ¡
#   - Glama: https://glama.ai/mcp/servers
#     MCP æœåŠ¡å™¨ç›®å½•
#
# ã€æœ¬åœ° MCP æœåŠ¡ï¼ˆstdio æ–¹å¼ï¼‰ã€‘
#   éœ€è¦å®‰è£… Node.js (npx) æˆ– uv (uvx)
#   - å®˜æ–¹æœåŠ¡å™¨åˆ—è¡¨: https://github.com/modelcontextprotocol/servers
#   - å¸¸ç”¨æœåŠ¡:
#     * npx @modelcontextprotocol/server-filesystem  (æ–‡ä»¶ç³»ç»Ÿ)
#     * npx @modelcontextprotocol/server-github      (GitHub API)
#     * uvx mcp-server-fetch                         (HTTP è¯·æ±‚)
#
# ============================================================

# ============================================================
# æ’ä»¶åŸºæœ¬ä¿¡æ¯
# ============================================================
[plugin]
name = "mcp_bridge_plugin"
version = "1.4.0"
config_version = "1.4.0"
enabled = true

# ============================================================
# å…¨å±€è®¾ç½®
# ============================================================
[settings]
# ğŸ·ï¸ å·¥å…·å‰ç¼€ - ç”¨äºåŒºåˆ† MCP å·¥å…·å’ŒåŸç”Ÿå·¥å…·
tool_prefix = "mcp"

# â±ï¸ è¿æ¥è¶…æ—¶ï¼ˆç§’ï¼‰
connect_timeout = 30.0

# â±ï¸ è°ƒç”¨è¶…æ—¶ï¼ˆç§’ï¼‰
call_timeout = 60.0

# ğŸ”„ è‡ªåŠ¨è¿æ¥ - å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥æ‰€æœ‰å·²å¯ç”¨çš„æœåŠ¡å™¨
auto_connect = true

# ğŸ” é‡è¯•æ¬¡æ•° - è¿æ¥å¤±è´¥æ—¶çš„é‡è¯•æ¬¡æ•°
retry_attempts = 3

# â³ é‡è¯•é—´éš”ï¼ˆç§’ï¼‰
retry_interval = 5.0

# ğŸ’“ å¿ƒè·³æ£€æµ‹ - å®šæœŸæ£€æµ‹æœåŠ¡å™¨è¿æ¥çŠ¶æ€
heartbeat_enabled = true

# ğŸ’“ å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰- å»ºè®® 30-120 ç§’
heartbeat_interval = 60.0

# ğŸ”„ è‡ªåŠ¨é‡è¿ - æ£€æµ‹åˆ°æ–­å¼€æ—¶è‡ªåŠ¨å°è¯•é‡è¿
auto_reconnect = true

# ğŸ”„ æœ€å¤§é‡è¿æ¬¡æ•° - è¿ç»­é‡è¿å¤±è´¥åæš‚åœé‡è¿
max_reconnect_attempts = 3

# ============================================================
# v1.2.0 é«˜çº§åŠŸèƒ½ï¼ˆå®éªŒæ€§ï¼‰
# ============================================================
# ğŸ“¦ å¯ç”¨ Resources - å…è®¸è¯»å– MCP æœåŠ¡å™¨æä¾›çš„èµ„æº
enable_resources = false

# ğŸ“ å¯ç”¨ Prompts - å…è®¸ä½¿ç”¨ MCP æœåŠ¡å™¨æä¾›çš„æç¤ºæ¨¡æ¿
enable_prompts = false

# ============================================================
# v1.3.0 ç»“æœåå¤„ç†åŠŸèƒ½
# ============================================================
# å½“ MCP å·¥å…·è¿”å›çš„å†…å®¹è¿‡é•¿æ—¶ï¼Œä½¿ç”¨ LLM å¯¹ç»“æœè¿›è¡Œæ‘˜è¦æç‚¼

# ğŸ”„ å¯ç”¨ç»“æœåå¤„ç†
post_process_enabled = false

# ğŸ“ åå¤„ç†é˜ˆå€¼ï¼ˆå­—ç¬¦æ•°ï¼‰- ç»“æœé•¿åº¦è¶…è¿‡æ­¤å€¼æ‰è§¦å‘åå¤„ç†
post_process_threshold = 500

# ï¿½ åå¤„ç†è¾“eå‡ºé™åˆ¶ - LLM æ‘˜è¦è¾“å‡ºçš„æœ€å¤§ token æ•°
post_process_max_tokens = 500

# ğŸ¤– åå¤„ç†æ¨¡å‹ï¼ˆå¯é€‰ï¼‰- ç•™ç©ºåˆ™ä½¿ç”¨ utils æ¨¡å‹ç»„
post_process_model = ""

# ï¿½ åå¤„ç†æç¤ºè¯æ¨¡æ¿-
post_process_prompt = '''ç”¨æˆ·é—®é¢˜ï¼š{query}

å·¥å…·è¿”å›å†…å®¹ï¼š
{result}

è¯·ä»ä¸Šè¿°å†…å®¹ä¸­æå–ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„å…³é”®ä¿¡æ¯ï¼Œç®€æ´å‡†ç¡®åœ°è¾“å‡ºï¼š'''

# ============================================================
# ğŸ†• v1.4.0 è°ƒç”¨é“¾è·¯è¿½è¸ª
# ============================================================
# è®°å½•å·¥å…·è°ƒç”¨è¯¦æƒ…ï¼Œä¾¿äºè°ƒè¯•å’Œåˆ†æ

# ğŸ” å¯ç”¨è°ƒç”¨è¿½è¸ª
trace_enabled = true

# ğŸ“Š è¿½è¸ªè®°å½•ä¸Šé™ - å†…å­˜ä¸­ä¿ç•™çš„æœ€å¤§è®°å½•æ•°
trace_max_records = 50

# ğŸ“ è¿½è¸ªæ—¥å¿—æ–‡ä»¶ - æ˜¯å¦å°†è¿½è¸ªè®°å½•å†™å…¥æ—¥å¿—æ–‡ä»¶
# å¯ç”¨åè®°å½•å†™å…¥ plugins/MaiBot_MCPBridgePlugin/logs/trace.jsonl
trace_log_enabled = false

# ============================================================
# ğŸ†• v1.4.0 å·¥å…·è°ƒç”¨ç¼“å­˜
# ============================================================
# ç¼“å­˜ç›¸åŒå‚æ•°çš„è°ƒç”¨ç»“æœï¼Œå‡å°‘é‡å¤è¯·æ±‚

# ğŸ—„ï¸ å¯ç”¨è°ƒç”¨ç¼“å­˜
cache_enabled = false

# â±ï¸ ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
cache_ttl = 300

# ğŸ“¦ æœ€å¤§ç¼“å­˜æ¡ç›® - è¶…å‡ºå LRU æ·˜æ±°
cache_max_entries = 200

# ï¿½ ç¼“å­˜æ’é™¤åˆ—è¡¨ - å³ä¸ç¼“å­˜çš„å·¥å…·ï¼ˆæ¯è¡Œä¸€ä¸ªï¼Œæ”¯æŒé€šé…ç¬¦ *ï¼‰
# æ—¶é—´ç±»ã€éšæœºç±»å·¥å…·å»ºè®®æ’é™¤
cache_exclude_tools = '''
mcp_*_time_*
mcp_*_random_*
'''

# ============================================================
# ğŸ†• v1.4.0 å·¥å…·ç®¡ç†
# ============================================================
[tools]
# ğŸ“‹ å·¥å…·æ¸…å•ï¼ˆåªè¯»ï¼‰- å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆ
tool_list = "(å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆ)"

# ğŸš« ç¦ç”¨å·¥å…·åˆ—è¡¨ - è¦ç¦ç”¨çš„å·¥å…·åï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰
# ä»ä¸Šæ–¹å·¥å…·æ¸…å•å¤åˆ¶å·¥å…·åï¼Œç¦ç”¨åè¯¥å·¥å…·ä¸ä¼šè¢« LLM è°ƒç”¨
# ç¤ºä¾‹ï¼š
# disabled_tools = '''
# mcp_filesystem_delete_file
# mcp_filesystem_write_file
# '''
disabled_tools = ""

# ============================================================
# ğŸ†• v1.4.0 æƒé™æ§åˆ¶
# ============================================================
[permissions]
# ğŸ” å¯ç”¨æƒé™æ§åˆ¶ - æŒ‰ç¾¤/ç”¨æˆ·é™åˆ¶å·¥å…·ä½¿ç”¨
perm_enabled = false

# ğŸ“‹ é»˜è®¤æ¨¡å¼
# allow_all: æœªé…ç½®è§„åˆ™çš„å·¥å…·é»˜è®¤å…è®¸
# deny_all: æœªé…ç½®è§„åˆ™çš„å·¥å…·é»˜è®¤ç¦æ­¢
perm_default_mode = "allow_all"

# ğŸ“œ æƒé™è§„åˆ™ï¼ˆJSON æ•°ç»„æ ¼å¼ï¼‰
# 
# ID æ ¼å¼ï¼šqq:ID:type
#   â€¢ qq:123456:group   - QQç¾¤
#   â€¢ qq:123456:private - ç§èŠ
#   â€¢ qq:123456:user    - ç‰¹å®šç”¨æˆ·ï¼ˆä»»ä½•åœºæ™¯ç”Ÿæ•ˆï¼‰
#
# å·¥å…·åæ”¯æŒé€šé…ç¬¦ *
#
# ç¤ºä¾‹è§„åˆ™ï¼š
# perm_rules = '''
# [
#   {
#     "tool": "mcp_filesystem_*",
#     "mode": "whitelist",
#     "allowed": ["qq:123456789:group", "qq:111111:user"]
#   },
#   {
#     "tool": "mcp_bing_*",
#     "denied": ["qq:987654321:group"]
#   }
# ]
# '''
perm_rules = "[]"

# ============================================================
# ğŸ”Œ MCP æœåŠ¡å™¨é…ç½®
# ============================================================
#
# âš ï¸ é‡è¦ï¼šJSON æ ¼å¼è¯´æ˜
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æœåŠ¡å™¨åˆ—è¡¨å¿…é¡»æ˜¯ JSON æ•°ç»„æ ¼å¼ï¼
#
# âŒ é”™è¯¯å†™æ³•ï¼š
#    { "name": "server1", ... },
#    { "name": "server2", ... }
#
# âœ… æ­£ç¡®å†™æ³•ï¼š
#    [
#      { "name": "server1", ... },
#      { "name": "server2", ... }
#    ]
#
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æ¯ä¸ªæœåŠ¡å™¨çš„é…ç½®å­—æ®µï¼š
#   name      - æœåŠ¡å™¨åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
#   enabled   - æ˜¯å¦å¯ç”¨ (true/false)
#   transport - ä¼ è¾“æ–¹å¼: "stdio" / "sse" / "http" / "streamable_http"
#   url       - æœåŠ¡å™¨åœ°å€ï¼ˆsse/http/streamable_http æ¨¡å¼å¿…å¡«ï¼‰
#   command   - å¯åŠ¨å‘½ä»¤ï¼ˆstdio æ¨¡å¼ï¼Œå¦‚ "npx" æˆ– "uvx"ï¼‰
#   args      - å‘½ä»¤å‚æ•°æ•°ç»„ï¼ˆstdio æ¨¡å¼ï¼‰
#   env       - ç¯å¢ƒå˜é‡å¯¹è±¡ï¼ˆstdio æ¨¡å¼ï¼Œå¯é€‰ï¼‰
#   post_process - æœåŠ¡å™¨çº§åˆ«åå¤„ç†é…ç½®ï¼ˆå¯é€‰ï¼Œè¦†ç›–å…¨å±€é…ç½®ï¼‰
#
# ============================================================

[servers]
list = '''
[
  {
    "name": "time-mcp-server",
    "enabled": false,
    "transport": "streamable_http",
    "url": "https://mcp.api-inference.modelscope.cn/server/mcp-server-time"
  },
  {
    "name": "fetch-local",
    "enabled": false,
    "transport": "stdio",
    "command": "uvx",
    "args": ["mcp-server-fetch"]
  }
]
'''

# ============================================================
# çŠ¶æ€æ˜¾ç¤ºï¼ˆåªè¯»ï¼‰
# ============================================================
[status]
connection_status = "æœªåˆå§‹åŒ–"
